(window.webpackJsonp=window.webpackJsonp||[]).push([[154],{590:function(t,s,a){"use strict";a.r(s);var n=a(2),p=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("æœ¬è®²ä»‹ç» Go ç¨‹åºæ€§èƒ½åˆ†æçš„æŠ€èƒ½ã€‚")]),t._v(" "),s("p",[t._v("åœ¨ä¸šåŠ¡éœ€æ±‚åˆæœŸï¼Œå…¶ä½“é‡å¾€å¾€æ¯”è¾ƒå°ï¼Œå³ä½¿åšäº†æ€§èƒ½ä¼˜åŒ–ï¼Œæ”¶ç›Šå´å¹¶ä¸å¤§ã€‚éšç€ä¸šåŠ¡é‡çš„ä¸Šå‡ï¼Œæƒ…å†µéšä¹‹å‘ç”Ÿå˜åŒ–ã€‚å“ªæ€•æŸä¸ªé‡é‡çº§çš„ä¸šåŠ¡éœ€è¦å‡ åä¸Šç™¾å°æœåŠ¡å™¨æ”¯æ’‘ï¼Œå“ªæ€•æ€§èƒ½ä¼˜åŒ–åªæå‡çº¦ 20% çš„æ•ˆç›Šã€‚"),s("strong",[t._v("æ”¶ç›Šä¸ä»…æ˜¯èŠ‚çœä¸‹æ¥çš„è¿è¡Œæ—¶é—´ï¼Œæ›´æ˜¯ç¡¬ä»¶æˆæœ¬çš„æŠ•å…¥å’Œè¿è¡Œç¨³å®šæ€§çš„ä¿è¯")]),t._v("ã€‚è¿™è¶³ä»¥è¯æ˜æ€§èƒ½ä¼˜åŒ–çš„é‡è¦æ€§ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("æ€§èƒ½ä¼˜åŒ–çš„åŸåˆ™éµå¾ªäºŒå…«å®šå¾‹")]),t._v("ã€‚åœ¨è¿›è¡Œä¼˜åŒ–æ—¶ï¼Œæƒ³è¦å°½å–„å°½ç¾å¾€å¾€æ˜¯éå¸¸éš¾çš„ã€‚æˆ‘ä»¬"),s("strong",[t._v("åº”ä¼˜å…ˆå¤„ç†äºŸéœ€ä¼˜åŒ–çš„å…³é”®éƒ¨åˆ†ï¼Œå¦‚æ­¤ä¾¿å¯è·å¾—å¤§éƒ¨åˆ†æ•ˆç›Šäº†")]),t._v("ã€‚å‰©ä¸‹çš„éƒ¨åˆ†å¾ˆå¯èƒ½æŠ•å…¥è¾ƒå¤šï¼Œä½†æ”¶ç›Šå¹¶ä¸å¤§ã€‚")]),t._v(" "),s("p",[t._v("Go è¯­è¨€æœ¬èº«æ˜¯é¢å‘æœåŠ¡ç«¯è½¯ä»¶è®¾è®¡çš„ï¼Œåœ¨ Go SDK ä¸­è‡ªå¸¦äº† pprof æ€§èƒ½åˆ†æå·¥å…·ã€‚å…·ä½“è¯´æ¥ï¼Œæœ‰ä¸¤ä¸ªç›¸å…³çš„åŒ…ï¼š"),s("strong",[t._v("runtime/pprof å’Œ net/http/pprofã€‚åè€…æ˜¯å¯¹å‰è€…çš„å°è£…ï¼Œç”¨äºæä¾›ç½‘ç»œä¾§è®¿é—®")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("æœ¬è®²å†…å®¹å°†ä» CPU å’Œå†…å­˜åˆ†æä¸¤æ–¹é¢ä»‹ç» pprof çš„ä½¿ç”¨ã€‚")]),t._v(" "),s("h2",{attrs:{id:"ç”Ÿæˆè¿è¡ŒæŠ¥å‘Š"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”Ÿæˆè¿è¡ŒæŠ¥å‘Š"}},[t._v("#")]),t._v(" ç”Ÿæˆè¿è¡ŒæŠ¥å‘Š")]),t._v(" "),s("p",[t._v("å‡è®¾ç°åœ¨æœ‰å¦‚ä¸‹ä»£ç ï¼Œå®ƒå®ç°äº†å¯¹ 10000 ä¸ªéšæœºæ•´æ•°çš„æ’åºï¼š")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v("\nå¤åˆ¶ä»£ç "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("randomIntCreator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" arr "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      arr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" rand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Intn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" arr\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   arr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("randomIntCreator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("len")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" j "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            t "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" t\n         "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("è‹¥è¦å¯¹å…¶è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œè§‚å¯Ÿå…¶è¿è¡Œ 100 æ¬¡çš„ç¨³å®šæ€§å’Œè€—æ—¶æƒ…å†µï¼Œä»…éœ€å¦‚ä¸‹è°ƒç”¨å³å¯ï¼š")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v("\nå¤åˆ¶ä»£ç "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   f"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("OpenFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cpu.pprof"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("O_CREATE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("O_RDWR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0644")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   pprof"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("StartCPUProfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("defer")]),t._v(" f"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("defer")]),t._v(" pprof"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("StopCPUProfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nğŸ’¡ æç¤ºï¼šå‹åŠ›æµ‹è¯•æ˜¯éå¸¸å®ç”¨çš„æµ‹è¯•æ–¹æ³•ï¼Œå®ƒèƒ½æ¨¡æ‹Ÿé«˜å¹¶å‘ã€å¤§æµé‡ç­‰æƒ…å†µï¼Œä»è€Œè¡¡é‡ç¨‹åºè¿è¡Œçš„ç¨³å®šæ€§å’Œæ­£ç¡®æ€§ã€‚æŸäº›é—®é¢˜å¯èƒ½å°½åœ¨è¿è¡Œå‹åŠ›è¾ƒå¤§æ—¶æ‰ä¼šæ˜¾ç°ï¼ŒæŸäº›æ€§èƒ½é—®é¢˜åœ¨ç¨‹åºåå¤æ‰§è¡Œåæ›´åŠ æ˜æ˜¾ã€‚\n")])])]),s("p",[t._v("å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œmain() å‡½æ•°ä¸­åˆ›å»ºäº† cpu.pprof æ–‡ä»¶å¹¶å°†è¿”å›çš„ *File å€¼èµ‹ç»™å˜é‡ fï¼Œç´§æ¥ç€è°ƒç”¨ pprof.StartCPUProfile() å‡½æ•°ä¼ å…¥ f å˜é‡ï¼Œå¼€å§‹æ‰§è¡Œ CPU è¿è¡Œåˆ†æã€‚")]),t._v(" "),s("p",[t._v("åœ¨ä¹‹åä½¿ç”¨æ–­è¨€å…³é—­æ–‡ä»¶ï¼Œè°ƒç”¨ pprof.StopCPUProfile() åœæ­¢ CPU è¿è¡Œåˆ†æã€‚æœ€åæ˜¯å¾ªç¯ 100 æ¬¡è°ƒç”¨ sort() å‡½æ•°ï¼Œè¿›è¡Œæµ‹è¯•ã€‚ç¨‹åºè¿è¡Œæ—¶ï¼Œé¦–å…ˆä¼šå°è¯•æ‰“å¼€ cpu.pprof æ–‡ä»¶ï¼Œå½“è¯¥æ–‡ä»¶ä¸å­˜åœ¨æ—¶åˆ™ä¼šåˆ›å»ºå®ƒã€‚ç´§æ¥ç€ä¾¿ä¼šå¼€å§‹ CPU åˆ†æã€‚éšåå¼€å§‹ 100 æ¬¡æ‰§è¡Œ sort() å‡½æ•°ã€‚æ‰§è¡Œååœæ­¢ CPU åˆ†æï¼Œå…³é—­æ–‡ä»¶ã€‚")]),t._v(" "),s("p",[t._v("è¿è¡Œä¸Šè¿°ä»£ç ï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œæ§åˆ¶å°ä¾¿ä¼šè¾“å‡ºï¼š")]),t._v(" "),s("blockquote",[s("p",[t._v("Process finished with the exit code 0")])]),t._v(" "),s("p",[t._v("è¡¨ç¤ºç¨‹åºæ­£å¸¸é€€å‡ºï¼Œç»“æŸè¿è¡Œã€‚æ­¤æ—¶æ¥åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œå¯ä»¥çœ‹åˆ° cpu.pprof æ–‡ä»¶ã€‚"),s("strong",[t._v("æ–‡ä»¶ä¸­è®°å½•ç€ä»å¼€å§‹ CPU åˆ†æåˆ°åœæ­¢ CPU åˆ†æä¹‹é—´çš„å‡½æ•°è€—æ—¶æƒ…å†µ")]),t._v("ã€‚")]),t._v(" "),s("h2",{attrs:{id:"äº¤äº’å¼ç»ˆç«¯è§†å›¾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äº¤äº’å¼ç»ˆç«¯è§†å›¾"}},[t._v("#")]),t._v(" äº¤äº’å¼ç»ˆç«¯è§†å›¾")]),t._v(" "),s("p",[t._v("æ‰“å¼€ç»ˆç«¯ï¼Œå®šä½åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œï¼š")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("shell\nå¤åˆ¶ä»£ç go tool pprof cpu.pprof\n")])])]),s("p",[t._v("ä¾¿å¯å¯åŠ¨äº¤äº’å¼ç»ˆç«¯è§†å›¾ï¼Œè·å–æ–‡ä»¶ä¸­ä¿å­˜çš„å„ç§ä¿¡æ¯äº†ï¼Œè¿è¡Œç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼š")]),t._v(" "),s("blockquote",[s("p",[t._v("Type: cpu")]),t._v(" "),s("p",[t._v("Time: May 18, 2022 at 10:11am (CST)")]),t._v(" "),s("p",[t._v("Duration: 12.73s, Total samples = 8.28s (65.03%)")]),t._v(" "),s("p",[t._v('Entering interactive mode (type "help" for commands, "o" for options)')]),t._v(" "),s("p",[t._v("(pprof)")])]),t._v(" "),s("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼Œä¸Šè¿°æ–‡å­—è¯´æ˜ï¼šæµ‹è¯•ç±»å‹æ˜¯ CPUï¼Œæµ‹è¯•æ—¶é—´æ˜¯ 2022 å¹´ 5 æœˆ 18 æ—¥ æ—©ä¸Š 10:11ï¼Œç¨‹åºè¿è¡Œæ€»æ—¶é•¿æ˜¯ 12.73 ç§’ï¼Œæµ‹è¯•é‡‡æ ·æ—¶é—´æ˜¯ 8.28 ç§’ï¼Œå æ€»æ—¶é•¿çš„ 65.03%ã€‚å€’æ•°ç¬¬ 2 è¡Œæ˜¯å‘½ä»¤è¯´æ˜ï¼šè¾“å…¥ help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ï¼Œåˆ—å‡ºæ”¯æŒçš„å‘½ä»¤ï¼›è¾“å…¥ o è¿›è¡Œé€‰é¡¹è®¾ç½®ã€‚æœ€åä¸€è¡Œæ˜¯ç­‰å¾…ç”¨æˆ·è¾“å…¥è¡Œã€‚")]),t._v(" "),s("p",[t._v("è¾ƒä¸ºå¸¸ç”¨çš„æ˜¯ top å‘½ä»¤ï¼Œå®ƒèƒ½åˆ—å‡ºå‡½æ•°çš„æ‰§è¡Œæ—¶é•¿ï¼Œå½“æˆ‘ä»¬æˆåŠŸè¿›å…¥äº¤äº’å¼ç»ˆç«¯ï¼Œå¹¶æ‰§è¡Œ top å‘½ä»¤åï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœè¾“å‡ºï¼š")]),t._v(" "),s("blockquote",[s("p",[t._v("Showing nodes accounting for 8.14s, 98.31% of 8.28s total")]),t._v(" "),s("p",[t._v("Dropped 29 nodes (cum <= 0.04s)")]),t._v(" "),s("p",[t._v("Showing top 10 nodes out of 18")]),t._v(" "),s("p",[t._v("flat flat% sum% cum cum%")]),t._v(" "),s("p",[t._v("7.97s 96.26% 96.26% 8.06s 97.34% main.sort")]),t._v(" "),s("p",[t._v("0.09s 1.09% 97.34% 0.09s 1.09% runtime.asyncPreempt")]),t._v(" "),s("p",[t._v("0.05s 0.6% 97.95% 0.05s 0.6% runtime.stdcall1")]),t._v(" "),s("p",[t._v("0.02s 0.24% 98.19% 0.10s 1.21% runtime.findrunnable")]),t._v(" "),s("p",[t._v("0.01s 0.12% 98.31% 0.05s 0.6% runtime.wakep")]),t._v(" "),s("p",[t._v("0 0% 98.31% 8.06s 97.34% main.main")]),t._v(" "),s("p",[t._v("0 0% 98.31% 0.05s 0.6% runtime.bgscavenge.func2")]),t._v(" "),s("p",[t._v("0 0% 98.31% 0.05s 0.6% runtime.checkTimers")]),t._v(" "),s("p",[t._v("0 0% 98.31% 8.06s 97.34% runtime.main")]),t._v(" "),s("p",[t._v("0 0% 98.31% 0.15s 1.81% runtime.mcall")])]),t._v(" "),s("p",[t._v("æˆ‘ä»¬ä»ä¸Šå¾€ä¸‹å¯¹ä¸Šè¿°è¾“å‡ºè¿›è¡Œè§£è¯»ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ç¬¬ 1 è¡Œçš„æ„æ€æ˜¯ä»¥ä¸‹ä¿¡æ¯æ˜¾ç¤ºäº†æ€»è®¡è€—æ—¶ 8.14 ç§’çš„å‡½æ•°æ‰§è¡Œæƒ…å†µï¼Œå æ€»è€—æ—¶çš„ 98.31%ã€‚")]),t._v(" "),s("li",[t._v("ç¬¬ 2 è¡Œçš„æ„æ€æ˜¯è¢«çœç•¥çš„æ‰§è¡Œå‡½æ•°æ€»è®¡ä¸ªæ•°ï¼š29ï¼Œå®ƒä»¬çš„æ€»è€—æ—¶å°äºç­‰äº 0.04 ç§’ã€‚")]),t._v(" "),s("li",[t._v("ç¬¬ 3 è¡Œçš„æ„æ€æ˜¯ä»¥ä¸‹è¡¨æ ¼åˆ—å‡ºäº†è¢«æ‰§è¡Œçš„ 18 ä¸ªå‡½æ•°ï¼Œä»¥è€—æ—¶ä»é•¿åˆ°çŸ­æ’åºï¼Œå‰ 10 ä¸ªå‡½æ•°ã€‚")])]),t._v(" "),s("p",[t._v("æ˜¾ç„¶ï¼Œsort() å‡½æ•°è€—æ—¶ 7.97ç§’ï¼Œè‡ªèº«å æ¯” 96.26%ã€‚å…¶æ¬¡è¿˜å¯ä»¥æ‰¾åˆ° main() å‡½æ•°ï¼Œå…¶ä¸­å¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…çš„é€»è¾‘ï¼Œä½† sort() å‡½æ•°åœ¨å…¶ä¸­ï¼Œæ‰€ä»¥æ€»æ—¶é•¿æ˜¯ 8.06 ç§’ï¼Œç´¯è®¡å æ¯” 98.31%ï¼Œä½†è‡ªèº«æ—¶é•¿å’Œå æ¯”éƒ½æ˜¯ 0ã€‚")]),t._v(" "),s("p",[t._v("è¡¨æ ¼ä¸­çš„ 5 åˆ—æ•°æ®çš„å«ä¹‰å¦‚ä¸‹ï¼š")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("åˆ—å")]),t._v(" "),s("th",[t._v("å«ä¹‰")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("flat")]),t._v(" "),s("td",[t._v("å‡½æ•°çš„æ‰§è¡Œè€—æ—¶")])]),t._v(" "),s("tr",[s("td",[t._v("flat%")]),t._v(" "),s("td",[t._v("å‡½æ•°çš„æ‰§è¡Œè€—æ—¶å  CPU æ€»æ—¶é—´çš„æ¯”ä¾‹")])]),t._v(" "),s("tr",[s("td",[t._v("sum%")]),t._v(" "),s("td",[t._v("å‰é¢æ¯ä¸€è¡Œçš„å‡½æ•°çš„æ‰§è¡Œè€—æ—¶å æ¯”çš„æ€»å’Œ")])]),t._v(" "),s("tr",[s("td",[t._v("cum")]),t._v(" "),s("td",[t._v("è¯¥å‡½æ•°åŠ ä¸Šè¯¥å‡½æ•°è°ƒç”¨çš„å‡½æ•°çš„æ€»è€—æ—¶")])]),t._v(" "),s("tr",[s("td",[t._v("cum%")]),t._v(" "),s("td",[t._v("è¯¥å‡½æ•°åŠ ä¸Šè¯¥å‡½æ•°è°ƒç”¨çš„å‡½æ•°çš„æ€»è€—æ—¶å  CPU æ€»æ—¶é—´çš„æ¯”ä¾‹")])])])]),t._v(" "),s("p",[t._v("å¯è§ï¼Œ"),s("strong",[t._v("é€šè¿‡åœ¨ä»£ç çš„ç‰¹å®šä½ç½®å¯åŠ¨å’Œåœæ­¢ CPU åˆ†æï¼Œå¯ä»¥å¾ˆå¥½åœ°æµ‹é‡è¢«å…¶åŒ…å«çš„ä»£ç è¿è¡ŒçŠ¶å†µã€‚éå¸¸é€‚ç”¨äºä¸€æ¬¡è¿è¡Œçš„æƒ…å†µï¼Œå³åªè·‘ä¸€æ¬¡ç¨‹åºï¼Œæ‰‹åŠ¨é‡‡é›†æ€§èƒ½æ•°æ®")]),t._v("ã€‚")]),t._v(" "),s("h2",{attrs:{id:"web-å¯è§†åŒ–è§†å›¾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web-å¯è§†åŒ–è§†å›¾"}},[t._v("#")]),t._v(" Web å¯è§†åŒ–è§†å›¾")]),t._v(" "),s("p",[t._v("Web å¯è§†åŒ–è§†å›¾æä¾›äº†æŸ¥çœ‹æ€§èƒ½åˆ†æç»“æœçš„å¦ä¸€ç§æ–¹å¼ï¼Œå®ƒæ›´åŠ ç›´è§‚ã€‚ç‰¹åˆ«æ˜¯å¯¹äºå‡½æ•°è°ƒç”¨çš„å±‚æ¬¡ç»“æ„è€Œè¨€ï¼Œçœ‹ä¸Šå»ä¼šæ›´åŠ æ–¹ä¾¿ã€‚")]),t._v(" "),s("p",[t._v("å¯¹äºæœ¬ä¾‹ï¼Œåœ¨è¿›å…¥ç»ˆç«¯äº¤äº’è§†å›¾åï¼Œ"),s("strong",[t._v("æ‰§è¡Œ web å‘½ä»¤")]),t._v("ï¼Œä¾¿ä¼šæ‰“å¼€ç³»ç»Ÿé»˜è®¤çš„æµè§ˆå™¨ï¼Œæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/64177e33a7154240ac944e2188d51c4e~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?",alt:"image-20220518111057034.png"}})]),t._v(" "),s("p",[t._v("ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹ï¼Œç½‘é¡µæ”¯æŒ"),s("strong",[t._v("ä½¿ç”¨é¼ æ ‡å·¦é”®æ‹–æ‹½è§†å›¾æ˜¾ç¤ºçš„å†…å®¹")]),t._v("ï¼Œä¹Ÿæ”¯æŒ"),s("strong",[t._v("é€šè¿‡æ»šè½®è¿›è¡Œè§†å›¾ç¼©æ”¾")]),t._v("ã€‚")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ğŸ’¡ æç¤ºï¼šæ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸Šå›¾æ‰€ç¤ºçš„åˆ†æç»“æœä¸ç»ˆç«¯è¾“å‡ºçš„ç»“æœç›¸åŒã€‚åœ¨ç¼–å†™æœ¬è®²æ—¶ï¼Œæˆ‘è¿è¡Œäº†ä¸¤æ¬¡ï¼Œæ‰€ä»¥ç»“æœç•¥æœ‰ä¸åŒã€‚\n")])])]),s("h2",{attrs:{id:"å®æ—¶æ€§èƒ½åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®æ—¶æ€§èƒ½åˆ†æ"}},[t._v("#")]),t._v(" å®æ—¶æ€§èƒ½åˆ†æ")]),t._v(" "),s("p",[t._v("æ­£å¦‚å‰æ–‡ä¸­æ‰€è¿°ï¼šåœ¨ä»£ç ç‰¹å®šçš„ä½ç½®è¿›è¡Œ CPU æ£€æµ‹å¯ä»¥è¾¾åˆ°åªè·‘ä¸€æ¬¡ç¨‹åºï¼Œä¾¿èƒ½é‡‡é›†æ€§èƒ½æ•°æ®çš„æƒ…å†µã€‚ä½†ç°å®ä¸­å¾€å¾€è¿˜éœ€è¦"),s("strong",[t._v("å®æ—¶è§‚æµ‹å†…å­˜çš„å ç”¨æƒ…å†µ")]),t._v("ï¼Œæ­¤æ—¶ï¼Œnet/http/pprof åŒ…å°±æ´¾ä¸Šç”¨åœºäº†ã€‚")]),t._v(" "),s("p",[t._v("è¿˜æ˜¯å¯¹éšæœºæ•°æ’åºçš„æ¡ˆä¾‹ï¼Œå°† main() å‡½æ•°ç¨åŠ ä¿®æ”¹ï¼Œä¾¿èƒ½é€šè¿‡ Web é¡µè§‚æµ‹å†…å­˜ä½¿ç”¨æƒ…å†µäº†ï¼Œå…·ä½“å¦‚ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v("\nå¤åˆ¶ä»£ç "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"net/http/pprof"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ListenAndServe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1:9090"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("panic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      fmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¿è¡Œç¬¬%dæ¬¡\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Second"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºä¸€ä¸Šæ¥å¯åŠ¨äº†ä¸€ä¸ªåç¨‹ï¼Œç›®çš„æ˜¯å¼€å¯æœ¬åœ° http æœåŠ¡å™¨ï¼Œå“åº” 9090 ç«¯å£ã€‚ç„¶åä¾¿æ˜¯ for å¾ªç¯äº†ï¼Œè¯·å¤§å®¶ç‰¹åˆ«ç•™æ„ for å¾ªç¯çš„ç»ˆæ­¢æ¡ä»¶ï¼Œæ­¤å¤„æ”¹ä¸º i>=0ã€‚æ˜¾ç„¶è¿™ä¸ªå¾ªç¯å°†ä¸€ç›´æŒç»­ä¸‹å»ï¼Œç›´åˆ°ç¨‹åºè¢«å¼ºè¡Œåœæ­¢ã€‚å¾ªç¯ä½“çš„å†…å®¹ä¹Ÿåšäº†ä¸€äº›è°ƒæ•´ï¼Œå³æ¯éš” 1 ç§’æ‰§è¡Œä¸€æ¬¡éšæœºæ•°çš„ç”Ÿæˆå’Œæ’åºï¼Œå¹¶è¾“å‡ºè¿è¡Œæ¬¡æ•°ã€‚")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("â—ï¸ æ³¨æ„ï¼šé€šè¿‡ Web è§‚å¯Ÿ pprof å®æ—¶å†…å­˜æµ‹è¯•ç»“æœï¼Œå¿…é¡»å¯¼å…¥ net/http/pprof åŒ…ã€‚\n")])])]),s("p",[t._v("è¿è¡Œä¸Šè¿°ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°æœ‰ç¨³å®šçš„æ–‡å­—è¾“å‡ºã€‚ç„¶åé€‚ç”¨æµè§ˆå™¨æ‰“å¼€ï¼š"),s("a",{attrs:{href:"https://link.juejin.cn/?target=http%3A%2F%2Flocalhost%3A9090%2Fdebug%2Fpprof%2F",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:9090/debug/pprof/"),s("OutboundLink")],1),t._v(" ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹é¡µé¢ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2d96100c4ce947af868e00bf58545fe6~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?",alt:"image-20220518112555878.png"}})]),t._v(" "),s("p",[t._v("æˆ‘ä»¬å¯ä»¥ç‚¹å‡»ä¸Šæ–¹çš„é“¾æ¥è¿›å…¥æŸä¸ªå…·ä½“çš„é¡¹ç›®æŸ¥çœ‹è¯¦æƒ…ã€‚ä»¥ä¸‹æ˜¯æˆ‘åœ¨ç¨‹åºåˆšå¼€å§‹è¿è¡Œå’Œå¾ªç¯ä½“æ‰§è¡Œäº† 10 æ¬¡åçš„å†…å­˜å ç”¨æ¦‚è§ˆä¿¡æ¯ï¼š")]),t._v(" "),s("p",[t._v("ç¨‹åºåˆšå¼€å§‹è¿è¡Œï¼š")]),t._v(" "),s("blockquote",[s("p",[t._v("# runtime.MemStats")]),t._v(" "),s("p",[t._v("# Alloc = 1123208")]),t._v(" "),s("p",[t._v("# TotalAlloc = 1123208")]),t._v(" "),s("p",[t._v("# Sys = 8407496")]),t._v(" "),s("p",[t._v("# Lookups = 0")]),t._v(" "),s("p",[t._v("# Mallocs = 2138")]),t._v(" "),s("p",[t._v("# Frees = 143")]),t._v(" "),s("p",[t._v("# HeapAlloc = 1123208")]),t._v(" "),s("p",[t._v("# HeapSys = 4030464")]),t._v(" "),s("p",[t._v("# HeapIdle = 1818624")]),t._v(" "),s("p",[t._v("# HeapInuse = 2211840")]),t._v(" "),s("p",[t._v("# HeapReleased = 1818624")]),t._v(" "),s("p",[t._v("# HeapObjects = 1995")]),t._v(" "),s("p",[t._v("# Stack = 163840 / 163840")]),t._v(" "),s("p",[t._v("# MSpan = 37400 / 49152")]),t._v(" "),s("p",[t._v("# MCache = 4672 / 16384")]),t._v(" "),s("p",[t._v("# BuckHashSys = 1447574")]),t._v(" "),s("p",[t._v("# GCSys = 1931744")]),t._v(" "),s("p",[t._v("# OtherSys = 768338")]),t._v(" "),s("p",[t._v("# NextGC = 4473924")]),t._v(" "),s("p",[t._v("# LastGC = 0")])]),t._v(" "),s("p",[t._v("å¾ªç¯ä½“æ‰§è¡Œçº¦ 10 æ¬¡åï¼š")]),t._v(" "),s("blockquote",[s("p",[t._v("# runtime.MemStats")]),t._v(" "),s("p",[t._v("# Alloc = 1130216")]),t._v(" "),s("p",[t._v("# TotalAlloc = 4646560")]),t._v(" "),s("p",[t._v("# Sys = 13588888")]),t._v(" "),s("p",[t._v("# Lookups = 0")]),t._v(" "),s("p",[t._v("# Mallocs = 2606")]),t._v(" "),s("p",[t._v("# Frees = 1442")]),t._v(" "),s("p",[t._v("# HeapAlloc = 1130216")]),t._v(" "),s("p",[t._v("# HeapSys = 8192000")]),t._v(" "),s("p",[t._v("# HeapIdle = 6242304")]),t._v(" "),s("p",[t._v("# HeapInuse = 1949696")]),t._v(" "),s("p",[t._v("# HeapReleased = 3850240")]),t._v(" "),s("p",[t._v("# HeapObjects = 1164")]),t._v(" "),s("p",[t._v("# Stack = 196608/ 196608")]),t._v(" "),s("p",[t._v("# MSpan = 46104/ 49152")]),t._v(" "),s("p",[t._v("# MCache = 4672/ 16384")]),t._v(" "),s("p",[t._v("# BuckHashSys = 1448454")]),t._v(" "),s("p",[t._v("# GCSys = 2638432")]),t._v(" "),s("p",[t._v("# OtherSys = 1047858")]),t._v(" "),s("p",[t._v("# NextGC = 4194304")]),t._v(" "),s("p",[t._v("# LastGC = 1652842675951237400")])]),t._v(" "),s("p",[t._v("éœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ traceï¼Œå½“æˆ‘ä»¬ç‚¹å‡» trace åï¼Œä¼šä¸‹è½½åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶çš„åç§°é»˜è®¤ä¸º traceã€‚é€šè¿‡åœ¨ç»ˆç«¯æ‰§è¡Œï¼š")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("shell\nå¤åˆ¶ä»£ç go tool trace trace\n")])])]),s("p",[t._v("è¿™å¥å‘½ä»¤ä¸­ï¼Œç¬¬ 2 ä¸ªtrace æŒ‡æ–‡ä»¶åã€‚æ‰§è¡Œåï¼Œå¯ä»¥è§‚æµ‹åˆ°å®Œæ•´çš„è·Ÿè¸ªç­‰ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åŒæ ·é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e4e48f651594c54b368c4cc48b2be33~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?",alt:"image-20220518113304636.png"}})]),t._v(" "),s("p",[t._v("å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨å®Œæ•´çš„ trace æ–‡ä»¶ä¸­åŒ…å«äº†ä¼—å¤šå®ç”¨çš„çŠ¶æ€æ•°æ®ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬ç‚¹å‡» View Trace æ—¶ï¼Œå¯ä»¥çœ‹åˆ°å…·ä½“çš„å‡½æ•°è°ƒç”¨æ—¶é•¿ç­‰ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/487aface589c4500a079f2682ce4ebc2~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?",alt:"image-20220518114238745.png"}})]),t._v(" "),s("h2",{attrs:{id:"å°ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å°ç»“"}},[t._v("#")]),t._v(" å°ç»“")]),t._v(" "),s("p",[t._v("ğŸ‰ æ­å–œï¼Œæ‚¨å®Œæˆäº†å…¨éƒ¨è¯¾ç¨‹çš„å­¦ä¹ ï¼")]),t._v(" "),s("p",[t._v("ğŸ“Œ ä»¥ä¸‹æ˜¯æœ¬æ¬¡è¯¾ç¨‹çš„é‡ç‚¹å†…å®¹æ€»ç»“ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("Go ç¨‹åºæ€§èƒ½åˆ†æå·¥å…·çš„ä½¿ç”¨")])]),t._v(" "),s("p",[t._v("æ­£å¦‚æœ¬è®²å¼€å¤´æ‰€è¿°ï¼šè¿›è¡Œæ€§èƒ½ä¼˜åŒ–çš„æ”¶ç›Šä¸ä»…æ˜¯èŠ‚çœä¸‹æ¥çš„è¿è¡Œæ—¶é—´ï¼Œæ›´æ˜¯ç¡¬ä»¶æˆæœ¬çš„æŠ•å…¥å’Œè¿è¡Œç¨³å®šæ€§çš„ä¿è¯ã€‚åœ¨è¿›è¡Œæ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œåº”éµå¾ªäºŒå…«åŸåˆ™ï¼Œé¦–è¦ä»»åŠ¡æ˜¯è§£å†³æœ€å½±å“æ€§èƒ½çš„é—®é¢˜ç‚¹ã€‚")]),t._v(" "),s("p",[t._v("Go SDK ä¸­åŒ…å«äº†è¿›è¡Œæ€§èƒ½åˆ†æçš„å·¥å…·ï¼špprofã€‚æœ¬è®²ä¸»è¦ä»‹ç»äº†ä½¿ç”¨å®ƒæ¥è¿›è¡Œ CPU å’Œå†…å­˜çš„æ€§èƒ½åˆ†æã€‚æ­¤å¤–ï¼Œpprof è¿˜èƒ½è·å–é”ç«äº‰çŠ¶æ€ã€çº¿ç¨‹/åç¨‹åˆ›å»ºæƒ…å†µç­‰æ•°æ®ï¼Œè¿™é‡Œå°±ä¸å†ä¸€ä¸€èµ˜è¿°äº†ã€‚")])])}),[],!1,null,null,null);s.default=p.exports}}]);